<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>LTL: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="ltl_doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LTL
   &#160;<span id="projectnumber">2.0.x</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LTL Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Niv Drory, Claus A. G&ouml;ssl, Jan Snigula</dd></dl>
<h1><a class="anchor" id="copying"></a>
Copying</h1>
<p>The Little Template Library is available under the GNU General Public License. See the file `COPYING' for details.</p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA</p>
<h1><a class="anchor" id="introduction"></a>
Introduction</h1>
<p>LTL provides dynamic arrays of up to 7 dimensions, subarrays and slicing, support for fixed size vectors and matrices including basic linear algebra operations, expression templates based evaluation, and I/O facilities for columnar ASCII and FITS format files.</p>
<p>Although the library is developed with application to astronomical image and data processing in mind (therefore FITS format I/O), it is by no means restricted to these fields of application. In fact, it qualifies as a fully general array processing package.</p>
<p>Focus is laid on a high abstraction level regarding the handling of expressions involving arrays or parts thereof and linear algebra related operations without the usually involved negative impact on performance. Hence the use of expression templates throughout the library. The price to pay is dependence on a compiler implementing enough of the current ANSI C++ specification, as well as significantly higher demand on resources at compile time.</p>
<p>Version 2.0 adds an support for convolutions in expression templates, an interface to the FFTW library and a simple method to plot directly into gnuplot. The types <code>complex&lt;T&gt;</code> are now fully supported, including all functions defined in the C++ standard header &lt;complex&gt;. Vector and tensor fields (implemented as <code>MArray&lt;FVector&lt;&gt;&gt;</code> and <code>MArray&lt;FMatrix&lt;&gt;&gt;</code> are now also supported in expression templates. Some convolutions, e.g. the gradient return such fields. Convolution operations in expressions, including finite-differencing kernels are now also fully supported. Internally, the expression template engine has been simplified. Now all expression operands are derived from a single base type, simplifying the code significantly. The FITS interface has been extended to support FITS extensions and tables.</p>
<p>Version 1.9 adds an interface to call BLAS and LAPACK routines on MArrays of dimension 2 and 1, as well as LU and Singular Value Decompositions on fixed-size FMatrix and FVector classes.</p>
<p>Version 1.8 adds support for multithreaded environments, for example use of OpenMP, and a much more user-friendly interface to non-linear least-squares fitting of functions.</p>
<p>A new feature as of LTL 1.7 is the automatic use of the vector execution unit present in some modern processors in the evaluation of array expressions. This is basically a compiler independent auto-vectorizer. Currently PowerPC processors (Altivec) and x86 processors (MMX/SSE/SSE2/SSE3) are supported.</p>
<p>LTL is known to compile on GCC versions 2.95.2 and above (Linux/x86/x86_64, Mac OS X/PPC/x86/x86_64, Solaris/SPARC), Intel ICC version 7.1 and above (Linux/x86/x86_64), Sun C++ version 5.5 and above (Solaris/SPARC), IBM xlC version 6 and above (AIX/PPC, Mac OS X/PPC), and LLVM/Clang. Other sufficiently ANSI complient C++ compilers should also do, but might require small modifications. Patches welcome. Old compiler versions do not receive the same amount of testing as more recent versions, so support for some old compiler/architecture combinatins may have been lost. Most development and testing is done on Linux and Mac OS X using g++ 4.x, LLVM, and Intel ICC.</p>
<p>The multidimensional array class <a class="el" href="a00091.html" title="A dynamic N-dimensional array storing objects of type T. ">ltl::MArray</a> has the following features:</p>
<ul>
<li>creating and referencing subarrays (rank preserving) </li>
<li>slicing (rank reducing), e.g. a column of an image </li>
<li>mixing subarrays and slices in the same indexing expression e.g. a submatrix of a slice of a cube </li>
<li>referencing the data of other arrays ('views') </li>
<li>reference counting for the memory chunks holding the actual data </li>
<li>STL-compatible iterators </li>
<li>arbitrary complex arithmetic expressions without creation of temporary objects: 'expression templates' </li>
<li>support for all standard library math functions </li>
<li>support for <code>complex&lt;float&gt;</code> and <code>complex&lt;double&gt;</code> </li>
<li>support for <code>FVector</code> and <code>FMatrix</code> element types: tensor fields </li>
<li>user supplied functions can be added easily </li>
<li>auto-vectorization of expressions (Altivec, SSE2/3/4) </li>
<li>indexing arbitrary sets of elements: <code>where()</code> </li>
<li>conditional expression evaluation: <code>merge( A!=0, 1/A, 0 )</code> </li>
<li>applying arbitrary functors to expressions: <code>apply(f, Expr)</code> </li>
<li>statistical and logical reductions: sum, average, variance, kappa-sigma-clipping, ..., allof, anyof, noneof </li>
<li>full reductions (scalar valued) and partial reductions (reducing rank by one) </li>
<li>stream I/O </li>
<li>ASCII-file I/O for columnar data </li>
<li>FITS file I/O including extensions and tables </li>
<li>transparent memory-mapped arrays </li>
<li>threadsafe reference-counting memory management </li>
<li>BLAS and LAPACK interface for 1 and 2D arrays. </li>
<li>FFTW interface </li>
<li>support for convolution operators in expression templates, e.g. gradient, Laplacian, ... </li>
<li>gnuplot interface</li>
</ul>
<p>The fixed vector and matrix classes <a class="el" href="a00058.html" title="Vector whose length is known at compile time. ">ltl::FVector</a> and <a class="el" href="a00056.html" title="Matrix with dimensions known at compile time. ">ltl::FMatrix</a> provide:</p>
<ul>
<li>compile time fixed size (allows strong optimization) </li>
<li>expression template based evaluation of arithmetic and linear algebra expressions </li>
<li>referencing column and row vectors of a matrix </li>
<li>vector dot product </li>
<li>matrix-vector and matrix-matrix dot-product </li>
<li>all operations on small enough objects are automatically unrolled by template metaprograms </li>
<li>STL-compatible iterators </li>
<li>Gauss-Jordan-Elimination </li>
<li>LU decomposition </li>
<li>Singular Value decomposition </li>
<li>Linear Least Squares Fitting method(s) </li>
<li>Nonlinear Least Squares Fitting methods(s) </li>
<li>gnuplot interface </li>
<li>Full support for <code>complex&lt;T&gt;</code></li>
</ul>
<p>Additionally, there are some utility classes providing: </p>
<ul>
<li>command line and config file parsing </li>
<li>output formatting utilities </li>
<li>date format handling</li>
</ul>
<p>The official homepage is at <a href="http://www.mpe.mpg.de/~drory/ltl/index.html">http://www.mpe.mpg.de/~drory/ltl/index.html</a> .</p>
<p>The author's email addresses are: </p>
<ul>
<li>Niv Drory &lt; drory at mpe dot mpg dot de &gt; </li>
<li>Claus A. Goessl &lt; cag at usm dot uni-muenchen dot de &gt; </li>
<li>Jan Snigula &lt; snigula at usm dot uni-muenchen dot de &gt;</li>
</ul>
<p>Comments, suggestions, and code contributions are welcome anytime.</p>
<h1><a class="anchor" id="documentation"></a>
Documentation</h1>
<p>The documentation is divided into 2 parts. The first part gives an overview of the library and its usage and contains many examples. It is a good starting point for getting to know the LTL:</p>
<ul>
<li><a class="el" href="a00003.html">Multidimensional Dynamic Arrays</a></li>
<li><a class="el" href="a00006.html">MArray I/O</a></li>
<li><a class="el" href="a00012.html">The Utility Library</a></li>
<li><a class="el" href="a00009.html">Fixed Size Vectors and Matrices</a></li>
</ul>
<p>The Doxygen-generated documnetation for the classes and functions serves as a reference, for example <a class="el" href="a00091.html" title="A dynamic N-dimensional array storing objects of type T. ">ltl::MArray</a>, <a class="el" href="a00058.html" title="Vector whose length is known at compile time. ">ltl::FVector</a>, <a class="el" href="a00056.html" title="Matrix with dimensions known at compile time. ">ltl::FMatrix</a>. You can access all of this through the modules section of the documentation.</p>
<h1><a class="anchor" id="installation"></a>
Compiling and Installing LTL</h1>
<h2><a class="anchor" id="compiling"></a>
Compiling LTL</h2>
<p>Make sure your compiler is supported. Currently <code>GCC</code> versions 2.95.2 and newer are known to work. <code>GCC</code> version 3.1 or later is recommended, since it is much faster, uses less memory and produces more optimized code when compiling heavily templated source. See <a href="http://gcc.gnu.org">http://gcc.gnu.org</a> .</p>
<p>LTL's build system is based on GNU <code>autoconf</code>. After unpacking the source archive, go to the directory containing the source and type <code></code>./configure, then <code>make</code>, optionally <code>make check</code> to run a testsuite, and finally <code>make install</code>.</p>
<p>The <code>configure</code> script will check for the presence of some standard headers and <code>POSIX</code> functions and verify that the compiler used has all necessary features needed to compile <code>LTL</code>.</p>
<p>The <code>configure</code> script accepts a number of standardized options, run <code>./configure &ndash;help</code> for a complete list. The most important options and environment variables are discussed in what follows.</p>
<p>The <code>configure</code> system honors the setting of the <code>CXX</code>, <code>CXXFLAGS</code>, and <code>CPPFLAGS</code> environment variables. The directory-prefix for installing header files and the library defaults to <code>/usr/local</code>. Headers are installed in <code>/usr/local/include</code>, the library, <code>libltl.a</code>, in <code>/usr/local/lib</code>. Info documentation goes to <code>/usr/local/info</code>.</p>
<p>Note that the <code>LTL</code> header files will actually be installed in a subdirectory <code>ltl/</code> within the <code>include</code> directory to prevent conflicts with existing header files.</p>
<p>The prefix can be changed by the <code>&ndash;prefix=</code> option to <code>configure</code>. <code>&ndash;libdir=</code>, <code>&ndash;includedir=</code>, and <code>&ndash;infodir=</code> can be used to change the target directories individually.</p>
<p>If you are planning on using LTL in a multithreaded environment (e.g. using OpenMP), supply the flag <code>&ndash;enable-multithread</code> to configure. This will ensure that reference counting memory allocations/deallocations are guarded by locks.</p>
<p>The <code>configure</code> script will try to auto-detect BLAS and LAPACK libraries on your system. If this fails or you wish to force the use of a specific implementation, use the options <code>&ndash;with-blas</code>[=LIB] and <code>&ndash;with-lapack</code>[=LIB].</p>
<p>A typical session might look as follows: </p>
<pre class="fragment">tar -zxf ltl-2.0.tar.gz
cd ltl-2.0/
./configure --prefix=$HOME/ 
...
make
make check
make install
</pre><p>The configure script will try to find sensible defaults for the system's C++ compiler. You can override the defaults by setting the CXX and CXXFLAGS environment variables. To compile with a non-default compiler or different compiler flags, replace the invocation of the configure script above by </p>
<pre class="fragment">./configure --prefix=$HOME/ CXXFLAGS='-g -O3 -Wall -march=... -fstrict-aliasing'
</pre><p> or </p>
<pre class="fragment">./configure --prefix=$HOME/ CXX=/opt/clang+llvm-2.8/bin/clang++ CXXFLAGS='-g -O3 -Wall'
</pre><h2><a class="anchor" id="using"></a>
Using LTL</h2>
<p>Using LTL involves including one or more header files, depending on the features of LTL that are needed in your source file and linking against <code>libltl</code>.</p>
<p>To keep compile times as low as possible, the <code>LTL</code> headers are split into parts providing distinct functionality.</p>
<h3><a class="anchor" id="using_marrays"></a>
Using Multidimensional Arrays</h3>
<p>To use the multidimensional array class, its expression template facilities and standard math operations, use </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00194.html">ltl/marray.h</a>&gt;</span>      <span class="comment">// class MArray</span></div>
</div><!-- fragment --><p>To use the I/O facilities for the <code>MArray</code> class, include one or more of the following <em>after</em> including <code><a class="el" href="a00194.html">ltl/marray.h</a></code>: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00196.html">ltl/marray_io.h</a>&gt;</span>   <span class="comment">// stream IO, operator&lt;&lt; and operator&gt;&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00168.html">ltl/ascio.h</a>&gt;</span>       <span class="comment">// columnar ASCII file IO</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00180.html">ltl/fitsio.h</a>&gt;</span>      <span class="comment">// FITS format IO</span></div>
</div><!-- fragment --><p>To use statistical functions on <code>MArrays</code> and their expressions, include </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00205.html">ltl/statistics.h</a>&gt;</span>      <span class="comment">// sum, average, median, ...</span></div>
</div><!-- fragment --><p>For support for convolution operations with small kernels in <code>MArray</code> expressions, include </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00173.html">ltl/convolve.h</a>&gt;</span>.</div>
</div><!-- fragment --><p>To call BLAS and LAPACK routines on <code>MArrays</code> include </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00169.html">ltl/marray/blas.h</a>&gt;</span>     <span class="comment">// BLAS Level 1, 2, and 3 routines</span></div>
</div><!-- fragment --><p> and/or </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00187.html">ltl/marray/lapack.h</a>&gt;</span>   <span class="comment">// Selected LAPACK routines (easily extensible).</span></div>
</div><!-- fragment --><p>For interfacing the FFTW3 library, include </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00177.html">ltl/fftw.h</a>&gt;</span>            <span class="comment">// Simple interface to FFTW3 routines</span></div>
</div><!-- fragment --><p>For a simple way of plotting data from your program, either for debugging purposes or for more serious visualization, there is a stream-based interface to executing and communicating with gnuplot: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00185.html">ltl/util/gnuplot.h</a>&gt;</span>    <span class="comment">// Stream-based interface to gnuplot</span></div>
</div><!-- fragment --><h3><a class="anchor" id="using_linalg"></a>
Using Fixed Vectors and Matrices</h3>
<p>To use the fixed vector class, its expression template facilities and standard math operations, use </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00182.html">ltl/fvector.h</a>&gt;</span>     <span class="comment">// class FVector</span></div>
</div><!-- fragment --><p>To use the fixed matrix class, its expression template facilities and standard math operations, use </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00181.html">ltl/fmatrix.h</a>&gt;</span>     <span class="comment">// class FMatrix</span></div>
</div><!-- fragment --><p>For some linear algebra with FMatrix and FVector use </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00184.html">ltl/fmatrix/gaussj.h</a>&gt;</span>    <span class="comment">// Gauss-Jordan</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00190.html">ltl/fmatrix/lusolve.h</a>&gt;</span>   <span class="comment">// LU decomposition</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00207.html">ltl/fmatrix/svdsolve.h</a>&gt;</span>  <span class="comment">// SVD</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00189.html">ltl/fmatrix/lmfit.h</a>&gt;</span>     <span class="comment">// non-linear least-squares fitting</span></div>
</div><!-- fragment --><p>Note that including <code>&lt;<a class="el" href="a00181.html">ltl/fmatrix.h</a>&gt;</code> automatically includes <code>&lt;<a class="el" href="a00182.html">ltl/fvector.h</a>&gt;</code>, since these represent column and row vectors of matrices.</p>
<h3><a class="anchor" id="namespaces"></a>
Namespaces</h3>
<p>All <code>LTL</code> objects reside in the <code>namespace ltl</code>, objects in the util library reside in <code>namespace util</code></p>
<h3><a class="anchor" id="configuration"></a>
Global Configuration</h3>
<p>Some global options can be set in the file <code>&lt;ltl/config.h&gt;</code> by defining or undefining preprocessor symbols. These options can also be controlled on a case by case basis by defining or undefining the appropriate symbol <em>before</em> including the first <code>LTL</code> header.</p>
<p>Also, make sure you include the ltl headers before any standard library headers to make sure that configuration options get honored by the standard library as well.</p>
<p>For example, if you want range checking (for debugging) turned on in a particular source file of your project, write</p>
<div class="fragment"><div class="line"><span class="comment">// MUST occur BEFORE including any ltl stuff!</span></div>
<div class="line"><span class="preprocessor">#define LTL_RANGE_CHECKING</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="a00194.html">ltl/marray.h</a>&gt;</span></div>
<div class="line">...</div>
</div><!-- fragment --><p>In particular these are: </p>
<ul>
<li><code>LTL_RANGE_CHECKING:</code> perform range checking when indexing. Off by default. </li>
<li><code>LTL_ABORT_ON_RANGE_ERROR:</code> abort and coredump if a range error occurs. This is the default if range checking is on. </li>
<li><code>LTL_THROW_ON_RANGE_ERROR:</code> throw an exception if a range error occurs. </li>
<li><code>LTL_THREADSAFE_MEMBLOCK:</code> Define this if you are using multiple threads or if you are compiling using OpenMP. This will guard memory block reference counting by locks. This option can also be set at configure time using the option <code>&ndash;enable-openmp</code>. Locks are implemented as machine intrinsics if available (GCC) or as posix mutexes if not (much slower). You have to make sure that you supply the necessary <code>-march</code> flag to GCC to ensure that the machine intrinsics are defined (and exist for the CPU you are compiling for). </li>
<li><code>LTL_TEMPLATE_LOOP_LIMIT:</code> maximum length of loops which are fully unrolled by expression template engine for <code><a class="el" href="a00058.html" title="Vector whose length is known at compile time. ">ltl::FVector</a></code> and <code><a class="el" href="a00056.html" title="Matrix with dimensions known at compile time. ">ltl::FMatrix</a></code> expressions. Defaults to 25. </li>
<li><code>LTL_USE_SIMD:</code> use vector execution unit when evaluating array expressions (auto-vectorize loops on supported hardware and if all operands in the expression have vectorized implementations). Currently, many array operations and reductions have vectorized implementations for <code>double</code> (on x86), <code>float</code>, and <code>int</code> element data. Shorter <code>int</code> types may or may not be supported. </li>
<li><code>LTL_UNROLL_EXPRESSIONS</code> (default) or <code>LTL_DONT_UNROLL_EXPRESSIONS:</code> Controls whether loops are unrolled 4 times or not. Sometimes unrolling can yield worse performance on register-poor architectures such as x86/ia32. </li>
<li><code>LTL_UNROLL_EXPRESSIONS_SIMD</code> (default) or <code>LTL_DONT_UNROLL_EXPRESSIONS_SIMD:</code> Controls whether vectorized loops are unrolled 4 times. Sometimes unrolling can yield worse performance on register-poor architectures such as x86/ia32. </li>
<li><code>LTL_DEBUG_EXPRESSIONS:</code> Print information about the evaluation method chosen for expressions. This will indicate among others if the multidimensional loops were collapsed and if the expression was vectorized. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 11 2015 14:54:52 for LTL by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
